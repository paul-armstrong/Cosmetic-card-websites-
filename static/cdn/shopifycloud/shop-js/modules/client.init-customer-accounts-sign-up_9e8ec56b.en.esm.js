import{b as e,B as t,g as n,b4 as o,b5 as a,b6 as s,b7 as i,b8 as r,b9 as c,ba as u,bb as l,bc as d,K as m,bd as b,i as v,H as f,J as p,a5 as g,a6 as y,b0 as h}from"./chunk.common_13449db8.esm.js";function A(){return e(this,void 0,void 0,(function*(){try{!function(){const e=n(),f=new o({elementName:"shop-login-button",flowVersion:a.SignUp,analyticsTraceId:e}),p=new WeakMap;let g=null;const y=s({onVisible:_,onFallback:e=>{e.addEventListener("focus",h,{once:!0}),f.trackShopPayLoginWithSdkErrorEvents({apiKey:"",errorCode:"fallback_to_focus_event",errorMessage:"Fallback to focus event for classic customer accounts"})}});function h(e){_(e.target)}function A(e,t){var n,o;const a=null===(n=e.elements.namedItem("checkout_url"))||void 0===n?void 0:n.value,s=null===(o=e.elements.namedItem("return_url"))||void 0===o?void 0:o.value,i=new URLSearchParams(Object.assign(Object.assign({analytics_trace_id:t},a&&{checkout_url:a}),s&&{return_url:s}));return`${window.location.origin}/account/redirect?${i.toString()}`}function _(n){var o;const s=n.form;if(!s)return void t.notify(new Error("Email form missing for classic customer accounts"));p.has(n)&&(t.notify(new Error("Input listener already exists for input")),null===(o=p.get(n))||void 0===o||o.destroy(),p.delete(n));const i=document.createElement("input");i.type="hidden",i.name="login_with_shop[analytics_trace_id]",i.value=e,s.appendChild(i),g||(g=function(e){const t=null===document.querySelector(d),n="true"===m(b),o=t&&!n,s=document.createElement("shop-login-button");s.setAttribute("client-id",""),s.setAttribute("action","default"),s.setAttribute("version","2"),s.setAttribute("flow-version",a.SignUp),s.setAttribute("analytics-context",v.ClassicCustomerAccounts),s.setAttribute("analytics-trace-id",e),s.setAttribute("hide-button","true"),s.setAttribute("email-verification-required","true"),s.setAttribute("disable-sign-up","true"),o&&s.setAttribute("auto-open","true");return document.body.appendChild(s),s}(e),f.trackClassicCustomerAccountsCreateAccountPageImpression(),g.addEventListener("completed",(()=>{const t=A(s,e);window.location.assign(t)})));const r=s.querySelector(c),y=s.querySelector(u);g.firstName=null==r?void 0:r.value,g.lastName=null==y?void 0:y.value,g.email=n.value,p.set(n,new l(n,(e=>{g.firstName=null==r?void 0:r.value,g.lastName=null==y?void 0:y.value,g.email=e})))}i({selector:r,onElementFound:e=>y.observe(e)})}()}catch(e){e instanceof Error&&t.notify(e)}}))}f()&&(p({bundle:"initCustomerAccountsSignUp",bundleLocale:"en"}),g(),y(),h("initCustomerAccountsSignUp",A));
//# sourceMappingURL=client.init-customer-accounts-sign-up_9e8ec56b.en.esm.js.map
